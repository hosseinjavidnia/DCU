<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Lecture 2 | CSC1184</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- Pyodide + CodeMirror (same stack as other module) -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/eclipse.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../theme/theme.css">
</head>
<body class="lecture">

  <div class="wrap wide">
    
    <nav>
      <div class="nav-left">
        <a href="../index.html" class="back-link">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M19 12H5m7-7l-7 7 7 7"></path>
          </svg>
          Back to Course
        </a>
        <span style="color:var(--border)">|</span>
        <h1>Week 2</h1>
      </div>
      <span class="badge-top">Lecture Note</span>
    </nav>

    <div class="lecture-wrap">
      
      <aside class="lecture-sidebar">
        <div class="toc-title">On this page</div>
        <a href="#intro" class="toc-link active">Introduction</a>
        <a href="#why-files" class="toc-link">1. Why Files?</a>
        <a href="#file-reading" class="toc-link">2. Reading Text Files Safely</a>
        <a href="#csv-anatomy" class="toc-link">3. What Is CSV?</a>
        <a href="#from-lines" class="toc-link">4. From Lines to Columns</a>
        <a href="#dict-basics" class="toc-link">5. Dictionaries Recap</a>
        <a href="#zip-helper" class="toc-link">6. The <code>zip()</code> Helper</a>
        <a href="#rows-as-dicts" class="toc-link">7. Rows as Dictionaries</a>
        <a href="#simple-loader" class="toc-link">8. Building a Simple Loader</a>
        <a href="#summaries" class="toc-link">9. Summaries from Loaded Data</a>
      </aside>

      <main class="lecture-content">
        
        <!-- INTRO -->
        <header id="intro">
          <h1>Week 2 – Files, CSVs &amp; Simple Tabular Data</h1>

          <p class="lede">
            In Week 1 we treated small lists as tiny “columns of data”. In Week 2 we move one step
            closer to the real world: data usually lives in <strong>files</strong>, often as
            <strong>CSV</strong> (comma-separated values). Our goal this week is to read a simple
            CSV file into Python as a list of dictionaries and then reuse the same summary patterns
            from Week 1.
          </p>

          <div class="callout callout-goal">
            <span class="callout-title">By the end of this lecture, you should be able to:</span>
            <ul>
              <li>Explain why we store data in files instead of hard-coding lists.</li>
              <li>Use the <code>with open(...)</code> pattern to read text files safely.</li>
              <li>Describe the structure of a basic CSV file (header row + data rows).</li>
              <li>Turn CSV lines into a list of dictionaries with named columns.</li>
              <li>Write a small reusable loader function that prepares data for analysis.</li>
            </ul>
          </div>
        </header>

        <!-- 1. WHY FILES -->
        <h2 id="why-files">1. Why Files?</h2>

        <p>
          Hard-coding data directly into Python files is fine for tiny toy examples, but it does
          not scale. Real projects tend to store data separately:
        </p>

        <ul>
          <li>Spreadsheets exported as <code>.csv</code>.</li>
          <li>Logs written as plain text files.</li>
          <li>Database tables dumped to disk.</li>
        </ul>

        <p>
          Separating code and data has two advantages:
        </p>

        <ul>
          <li>You can update the data without changing the code.</li>
          <li>You can reuse the same analysis code on many different files.</li>
        </ul>

        <div class="box box-info">
          <span class="box-title">Idea</span>
          In Week 2 we will still work with very small datasets, but we will pretend they come
          from “real” CSV files. The patterns we learn here scale up to much larger files later.
        </div>

        <!-- 2. FILE READING -->
        <h2 id="file-reading">2. Reading Text Files Safely</h2>

        <p>
          Python reads files through a connection called a <strong>file object</strong>. The safest
          way to work with a file object is the <code>with</code> statement:
        </p>

        <pre class="pseudo-block">
with open("data/students.csv", "r", encoding="utf-8") as f:
    # File is open here
    text = f.read()
# Here the file is automatically closed
        </pre>

        <p>
          In this environment we will simulate files using multi-line strings, but you should still
          recognise the real-world pattern with <code>open(...)</code>.
        </p>

        <h3>2.1 Patterns for reading</h3>

        <ul>
          <li><code>f.read()</code> – read the whole file into one big string.</li>
          <li><code>f.readlines()</code> – read the file into a list of lines.</li>
          <li><code>for line in f:</code> – process the file line by line in a loop.</li>
        </ul>

        <section class="card" id="ex-read-patterns">
          <div class="card-head">
            <div class="file-name">Example – Simulating file reading with a string</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
# We simulate a small text "file" using a multi-line string.
text = """line one
line two
line three"""

print("Whole text (like f.read()):")
print(text)

print("\nLines (like f.readlines()):")
lines = text.splitlines()
print(lines)

print("\nLooping over lines (like for line in f:):")
for line in lines:
    print("->", line)
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <!-- 3. CSV ANATOMY -->
        <h2 id="csv-anatomy">3. What Is CSV?</h2>

        <p>
          CSV stands for <strong>Comma-Separated Values</strong>. It is a very simple way to store
          table-shaped data as plain text. Typical structure:
        </p>

        <ul>
          <li>First line: <strong>header row</strong> – column names.</li>
          <li>Remaining lines: <strong>data rows</strong> – one observation per line.</li>
          <li>Columns separated by a delimiter, usually a comma <code>,</code>.</li>
        </ul>

        <div class="card">
          <div class="card-head">
            <div class="file-name">students.csv</div>
          </div>
          <div class="card-body">
<pre class="output-box" style="white-space:pre; padding:12px; background:#fff; color:#333;">
id,name,programme,exam_score,labs_attended  &lt;-- header (column names)
1,Ana,CS,55,6                              &lt;-- row 1
2,Bob,CS,62,8                              &lt;-- row 2
3,Ciara,DS,71,7                            &lt;-- row 3
</pre>
          </div>
        </div>

        <!-- 4. FROM LINES TO COLUMNS -->
        <h2 id="from-lines">4. From Lines to Columns</h2>

        <p>
          A CSV file is just text. Python sees each data row as a single string such as:
          <code>"1,Ana,CS,55,6"</code>. Our first step is to:
        </p>

        <ol>
          <li>Strip away the newline characters.</li>
          <li>Split the line on commas into a list of fields.</li>
        </ol>

        <section class="card" id="ex-strip-split">
          <div class="card-head">
            <div class="file-name">Example – Stripping and splitting a CSV line</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
line = "1,Ana,CS,55,6\n"
print("Raw line with newline:")
print(repr(line))

clean = line.strip()  # removes newline at the end
print("\nAfter strip():")
print(repr(clean))

parts = clean.split(",")  # split on comma
print("\nAfter split(','):")
print(parts)

# Access by numeric index
print("\nID:", parts[0])
print("Name:", parts[1])
print("Programme:", parts[2])
print("Exam score:", parts[3])
print("Labs attended:", parts[4])
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <p>
          Using numeric indices like <code>parts[3]</code> works, but it is easy to forget which
          column is which. A more descriptive structure is a dictionary.
        </p>

        <!-- 5. DICTIONARIES RECAP -->
        <h2 id="dict-basics">5. Dictionaries Recap</h2>

        <p>
          A <strong>dictionary</strong> in Python stores labelled pairs: <strong>keys</strong> and
          <strong>values</strong>. You can think of it as a tiny lookup table:
        </p>

        <ul>
          <li>Keys are usually strings like <code>"name"</code> or <code>"programme"</code>.</li>
          <li>Values can be numbers, strings, or anything else.</li>
        </ul>

        <p>
          Syntax (curly braces with <code>key: value</code> pairs):
        </p>

        <pre class="pseudo-block">
student = {
    "id": 1,
    "name": "Ana",
    "programme": "CS",
    "exam_score": 55
}
        </pre>

        <p>
          We access values by key, not by numeric index:
        </p>

        <ul>
          <li><code>student["name"]</code> → <code>"Ana"</code></li>
          <li><code>student["exam_score"]</code> → <code>55</code></li>
        </ul>

        <section class="card" id="ex-dict-basics">
          <div class="card-head">
            <div class="file-name">Example – A tiny student dictionary</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
student = {
    "id": 1,
    "name": "Ana",
    "programme": "CS",
    "exam_score": 55
}

print("Whole dictionary:")
print(student)

print("\nAccess by key:")
print("Name:", student["name"])
print("Programme:", student["programme"])
print("Exam score:", student["exam_score"])

# You can also change values:
student["exam_score"] = 60
print("\nAfter updating exam_score:")
print(student)
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <div class="box box-info">
          <span class="box-title">Connection to data tables</span>
          One row of a dataset (one student, one transaction, one match) fits naturally into
          one dictionary. Later we will store many rows as a <code>list</code> of dictionaries.
        </div>

        <!-- 6. ZIP HELPER -->
        <h2 id="zip-helper">6. The <code>zip()</code> Helper</h2>

        <p>
          The built-in function <code>zip()</code> pairs up elements from two (or more) lists:
        </p>

        <pre class="pseudo-block">
numbers = [1, 2, 3]
words   = ["one", "two", "three"]

pairs = list(zip(numbers, words))
# pairs is now [(1, "one"), (2, "two"), (3, "three")]
        </pre>

        <p>
          We will use <code>zip</code> to pair:
        </p>

        <ul>
          <li>column names from the header row, and</li>
          <li>field values from each data row,</li>
        </ul>

        <p>
          so that we can build a dictionary for each row.
        </p>

        <section class="card" id="ex-zip-helper">
          <div class="card-head">
            <div class="file-name">Example – Basic <code>zip()</code> usage</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
numbers = [1, 2, 3]
words = ["one", "two", "three"]

z = zip(numbers, words)

print("Pairs from zip:")
for pair in z:
    print(pair)

# We can also go straight to a dictionary:
d = dict(zip(words, numbers))
print("\nDictionary from zip(words, numbers):")
print(d)

print("\nAccess 'two':", d["two"])
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <!-- 7. ROWS AS DICTS -->
        <h2 id="rows-as-dicts">7. Rows as Dictionaries</h2>

        <p>
          We now combine the ideas:
        </p>

        <ul>
          <li>Use <code>split</code> on the header line to get column names.</li>
          <li>Use <code>split</code> on each data line to get field values.</li>
          <li>Use <code>zip</code> to pair them.</li>
          <li>Use <code>dict</code> to build a dictionary for that row.</li>
        </ul>

        <section class="card" id="ex-row-dict">
          <div class="card-head">
            <div class="file-name">Example – Turning one CSV row into a dictionary</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
header_line = "id,name,programme,exam_score,labs_attended\n"
data_line = "1,Ana,CS,55,6\n"

# Prepare header and parts
header = header_line.strip().split(",")
parts = data_line.strip().split(",")

print("Header:", header)
print("Parts:", parts)

# Pair them up and build a dictionary
row = dict(zip(header, parts))
print("\nRow as dict:")
print(row)

print("\nAccess by label:")
print("Name:", row["name"])
print("Exam score:", row["exam_score"])
print("Labs attended:", row["labs_attended"])
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <div class="box box-info">
          <span class="box-title">Key idea</span>
          We want a <strong>list of dictionaries</strong>:
          <code>[row1, row2, row3, ...]</code>. Each dictionary represents one student. This is
          close to the way pandas will represent tables later.
        </div>

        <!-- 8. SIMPLE LOADER -->
        <h2 id="simple-loader">8. Building a Simple Loader Function</h2>

        <p>
          We now wrap the pattern into a reusable function. Our function will:
        </p>

        <ol>
          <li>Take CSV text as input (later this text will come from a real file).</li>
          <li>Split into lines.</li>
          <li>Use the first line as the header.</li>
          <li>Loop over remaining lines, turning each into a dictionary.</li>
          <li>Convert obvious numeric fields from strings to integers.</li>
        </ol>

        <p>
          We will:
        </p>

        <ul>
          <li>Skip completely empty lines.</li>
          <li>Skip lines with the wrong number of columns.</li>
          <li>Only convert to <code>int</code> when the text looks like a number (using <code>isdigit()</code>).</li>
        </ul>

        <section class="card" id="ex-loader">
          <div class="card-head">
            <div class="file-name">Example – A simple CSV loader (string version)</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
# Simulated contents of students.csv
csv_text = """id,name,programme,exam_score,labs_attended
1,Ana,CS,55,6
2,Bob,CS,62,8
3,Ciara,DS,71,7
4,Dave,CS,48,3
"""

def load_students_from_text(text):
    lines = text.splitlines()
    if not lines:
        return []

    # Step 1: header row
    header_line = lines[0].strip()
    header = [name.strip() for name in header_line.split(",")]

    students = []

    # Step 2: loop over data rows
    for line in lines[1:]:
        line = line.strip()
        if not line:
            # skip completely empty lines
            continue

        parts = [part.strip() for part in line.split(",")]

        # If the row does not match the header in length, skip it
        if len(parts) != len(header):
            print("Skipping line with wrong number of columns:", line)
            continue

        row = dict(zip(header, parts))

        # Convert some fields to int if they look like numbers
        if row.get("exam_score", "").isdigit():
            row["exam_score"] = int(row["exam_score"])

        if row.get("labs_attended", "").isdigit():
            row["labs_attended"] = int(row["labs_attended"])

        students.append(row)

    return students

students = load_students_from_text(csv_text)
print("Loaded students:")
for s in students:
    print(s)
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <!-- 9. SUMMARIES FROM LOADED DATA -->
        <h2 id="summaries">9. Summaries from Loaded Data</h2>

        <p>
          Once we have a list of dictionaries, we can reuse the Week-1 patterns: collect a list of
          scores, compute an average, count how many pass a threshold, and so on.
        </p>

        <section class="card" id="ex-summaries">
          <div class="card-head">
            <div class="file-name">Example – Summaries on a list of dicts</div>
            <div class="toolbar">
              <button class="btn btn-primary run">Run ▸</button>
              <button class="btn clear">Clear</button>
              <button class="btn reset">Reset</button>
            </div>
          </div>
          <div class="card-body">
            <div class="lecture-stack">
              <div class="editor-pane">
<textarea class="code" spellcheck="false">
csv_text = """id,name,programme,exam_score,labs_attended
1,Ana,CS,55,6
2,Bob,CS,62,8
3,Ciara,DS,71,7
4,Dave,CS,48,3
"""

def load_students_from_text(text):
    lines = text.splitlines()
    if not lines:
        return []

    header = [name.strip() for name in lines[0].strip().split(",")]
    students = []

    for line in lines[1:]:
        line = line.strip()
        if not line:
            continue

        parts = [part.strip() for part in line.split(",")]
        if len(parts) != len(header):
            continue

        row = dict(zip(header, parts))

        if row.get("exam_score", "").isdigit():
            row["exam_score"] = int(row["exam_score"])

        if row.get("labs_attended", "").isdigit():
            row["labs_attended"] = int(row["labs_attended"])

        students.append(row)

    return students

def average_exam_score(students):
    scores = [s["exam_score"] for s in students]
    return sum(scores) / len(scores)

def count_passing(students, threshold=60):
    count = 0
    for s in students:
        if s["exam_score"] >= threshold:
            count += 1
    return count

students = load_students_from_text(csv_text)

print("Students:", students)
print()

print("Average exam score:", average_exam_score(students))
print("Number passing (>= 60):", count_passing(students, threshold=60))
print("Number passing (>= 70):", count_passing(students, threshold=70))
</textarea>
              </div>
              <div class="output-pane">
                <div class="output-label">Terminal Output</div>
                <pre class="output-box" aria-live="polite"></pre>
              </div>
            </div>
          </div>
          <div class="status">
            <span class="dot"></span><span class="status-text">Ready</span>
          </div>
        </section>

        <div class="box box-info">
          <span class="box-title">Where we are in the module</span>
          At the end of Week 2 you should be comfortable moving between three levels:
          <ol>
            <li>CSV file as plain text.</li>
            <li>List of dictionaries in Python.</li>
            <li>Simple summary functions that answer questions about the data.</li>
          </ol>
          In Week 3 we will start moving numeric columns into NumPy arrays so that calculations
          become shorter and faster.
        </div>

      </main>
    </div>

    <footer>
      <p class="copyright"></p>
      <div class="legal-notice"></div>
    </footer>

  </div>

  <script src="../theme/footer.js"></script>
  <script src="../theme/legal.js"></script>
  <script src="../engine/engine.js"></script>
  <script>
    initPlayground('ex-read-patterns');
    initPlayground('ex-strip-split');
    initPlayground('ex-dict-basics');
    initPlayground('ex-zip-helper');
    initPlayground('ex-row-dict');
    initPlayground('ex-loader');
    initPlayground('ex-summaries');

    applyFooterText();
    applyLegalNotice();
  </script>
</body>
</html>